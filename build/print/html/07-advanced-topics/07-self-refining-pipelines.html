<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Self-Refining Pipelines - DSPy: A Practical Guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="The most comprehensive DSPy guide with complete coverage of 9 research papers, advanced optimization techniques, and production-ready applications">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../assets/print-only-ef201963.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-4ea68664.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">DSPy: A Practical Guide</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>


                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="self-refining-pipelines"><a class="header" href="#self-refining-pipelines">Self-Refining Pipelines</a></h1>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<ul>
<li><strong>Previous Section</strong>: <a href="./05-deployment-strategies.html">Deployment Strategies</a> - Understanding system deployment</li>
<li><strong>Chapter 3</strong>: Assertions Module - Solid grasp of assertion concepts</li>
<li><strong>Required Knowledge</strong>: Pipeline architecture, iterative improvement patterns</li>
<li><strong>Difficulty Level</strong>: Expert</li>
<li><strong>Estimated Reading Time</strong>: 65 minutes</li>
</ul>
<h2 id="learning-objectives"><a class="header" href="#learning-objectives">Learning Objectives</a></h2>
<p>By the end of this section, you will:</p>
<ul>
<li>Master the architecture of self-refining pipeline systems</li>
<li>Design pipelines that automatically improve their outputs</li>
<li>Implement iterative refinement with quality feedback loops</li>
<li>Build adaptive systems that learn from failures</li>
<li>Create robust production pipelines with guaranteed quality</li>
</ul>
<h2 id="introduction-to-self-refining-pipelines"><a class="header" href="#introduction-to-self-refining-pipelines">Introduction to Self-Refining Pipelines</a></h2>
<p>Self-refining pipelines are advanced DSPy systems that automatically evaluate and improve their own outputs through iterative refinement cycles. These systems use assertions to detect quality issues and trigger intelligent refinement strategies until high-quality outputs are achieved.</p>
<h3 id="the-self-refinement-paradigm"><a class="header" href="#the-self-refinement-paradigm">The Self-Refinement Paradigm</a></h3>
<p><strong>Traditional Pipeline:</strong></p>
<pre><code>Input → Process → Output
</code></pre>
<p><strong>Self-Refining Pipeline:</strong></p>
<pre><code>Input → Process → Evaluate → Refine → Evaluate → ...
                                      ↓
                                  Quality Output
</code></pre>
<h3 id="why-self-refinement-matters"><a class="header" href="#why-self-refinement-matters">Why Self-Refinement Matters</a></h3>
<pre><code class="language-python"># Traditional approach - fixed quality
generator = dspy.Predict("prompt -&gt; story")
story = generator(prompt="A robot discovers emotions")
# Quality depends solely on initial generation

# Self-refining approach - guaranteed quality
class RefiningStoryGenerator(dspy.Module):
    def __init__(self):
        super().__init__()
        self.generator = dspy.Predict("prompt -&gt; story")
        self.evaluator = dspy.Predict("story -&gt; critique, score")
        self.refiner = dspy.Predict("story, critique -&gt; improved_story")

    def forward(self, prompt):
        story = self.generator(prompt=prompt)

        # Iterative refinement loop
        for iteration in range(3):
            critique = self.evaluator(story=story.story)
            if critique.score &gt;= 0.8:  # Quality threshold
                break

            story = self.refiner(
                story=story.story,
                critique=critique.critique
            )

        return story
</code></pre>
<h2 id="core-architecture"><a class="header" href="#core-architecture">Core Architecture</a></h2>
<h3 id="1-the-refinement-loop"><a class="header" href="#1-the-refinement-loop">1. The Refinement Loop</a></h3>
<p>The fundamental pattern of self-refinement:</p>
<pre><code class="language-python">class SelfRefiningModule(dspy.Module):
    """Base class for self-refining modules."""

    def __init__(self, max_iterations=3, quality_threshold=0.8):
        super().__init__()
        self.max_iterations = max_iterations
        self.quality_threshold = quality_threshold
        self.refinement_history = []

    def generate_initial(self, **kwargs):
        """Generate initial output."""
        raise NotImplementedError

    def evaluate_quality(self, output, **kwargs):
        """Evaluate output quality."""
        raise NotImplementedError

    def refine_output(self, output, feedback, **kwargs):
        """Refine output based on feedback."""
        raise NotImplementedError

    def forward(self, **kwargs):
        """Execute refinement loop."""
        # Initial generation
        output = self.generate_initial(**kwargs)

        # Refinement loop
        for iteration in range(self.max_iterations):
            # Evaluate current quality
            quality = self.evaluate_quality(output, **kwargs)

            # Check if quality threshold met
            if quality.score &gt;= self.quality_threshold:
                break

            # Refine based on feedback
            output = self.refine_output(
                output=output,
                feedback=quality.feedback,
                **kwargs
            )

            # Record for analysis
            self.refinement_history.append({
                'iteration': iteration,
                'quality': quality.score,
                'feedback': quality.feedback
            })

        return output
</code></pre>
<h3 id="2-quality-evaluation-patterns"><a class="header" href="#2-quality-evaluation-patterns">2. Quality Evaluation Patterns</a></h3>
<p>Different strategies for evaluating output quality:</p>
<pre><code class="language-python">class QualityEvaluator:
    """Comprehensive quality evaluation system."""

    def __init__(self):
        self.evaluators = {
            'coherence': self.evaluate_coherence,
            'completeness': self.evaluate_completeness,
            'accuracy': self.evaluate_accuracy,
            'style': self.evaluate_style,
            'format': self.evaluate_format
        }

    def evaluate_all(self, output, requirements):
        """Evaluate all quality dimensions."""
        scores = {}

        for dimension, evaluator in self.evaluators.items():
            score = evaluator(output, requirements)
            scores[dimension] = score

        # Calculate overall score
        overall = sum(scores.values()) / len(scores)

        # Generate comprehensive feedback
        feedback = self.generate_feedback(scores, requirements)

        return dspy.Prediction(
            overall_score=overall,
            dimension_scores=scores,
            feedback=feedback
        )

    def evaluate_coherence(self, output, requirements):
        """Evaluate logical coherence."""
        # Use chain of thought to check consistency
        coherence_checker = dspy.ChainOfThought(
            "text -&gt; coherence_score, inconsistency_notes"
        )

        result = coherence_checker(text=output)

        return float(result.coherence_score)

    def evaluate_completeness(self, output, requirements):
        """Check if all requirements are addressed."""
        required_elements = requirements.get('elements', [])

        completeness = 0.0
        for element in required_elements:
            if element.lower() in output.lower():
                completeness += 1.0 / len(required_elements)

        return completeness

    def generate_feedback(self, scores, requirements):
        """Generate actionable feedback for improvement."""
        feedback_parts = []

        # Lowest scoring dimensions
        sorted_scores = sorted(scores.items(), key=lambda x: x[1])
        for dimension, score in sorted_scores[:2]:
            if score &lt; 0.7:
                feedback_parts.append(
                    f"Improve {dimension}: score {score:.1f}"
                )

        # Missing elements
        if 'completeness' in scores and scores['completeness'] &lt; 1.0:
            feedback_parts.append("Address all required elements")

        return "; ".join(feedback_parts) if feedback_parts else "Good quality"
</code></pre>
<h3 id="3-refinement-strategies"><a class="header" href="#3-refinement-strategies">3. Refinement Strategies</a></h3>
<p>Different approaches to refining outputs:</p>
<pre><code class="language-python">class RefinementStrategies:
    """Collection of refinement strategies."""

    @staticmethod
    def incremental_refinement(output, feedback):
        """Gradual improvement strategy."""
        refiner = dspy.Predict(
            "output, feedback -&gt; refined_output",
            instructions="Make targeted improvements based on feedback"
        )

        result = refiner(output=output, feedback=feedback)
        return result.refined_output

    @staticmethod
    def rewrite_refinement(output, feedback):
        """Complete rewrite strategy."""
        rewriter = dspy.ChainOfThought(
            "original_output, feedback, requirements -&gt; new_output",
            instructions="Rewrite from scratch addressing all feedback"
        )

        result = rewriter(
            original_output=output,
            feedback=feedback,
            requirements=feedback
        )

        return result.new_output

    @staticmethod
    def focused_refinement(output, feedback, focus_area):
        """Focus refinement on specific areas."""
        # Extract specific section to refine
        section = extract_section(output, focus_area)

        focused_refiner = dspy.Predict(
            "section, feedback -&gt; improved_section",
            instructions=f"Improve only the {focus_area} section"
        )

        improved = focused_refiner(section=section, feedback=feedback)

        # Replace section in original
        return replace_section(output, focus_area, improved.improved_section)

    @staticmethod
    def collaborative_refinement(output, feedback):
        """Use multiple perspectives for refinement."""
        # Generate different improvement approaches
        strategies = [
            "Clarity focused",
            "Detail oriented",
            "Concise version"
        ]

        refinements = []
        for strategy in strategies:
            refiner = dspy.Predict(
                "output, feedback, strategy -&gt; refined_output",
                instructions=f"Apply {strategy.lower()} improvement strategy"
            )

            result = refiner(
                output=output,
                feedback=feedback,
                strategy=strategy
            )
            refinements.append(result.refined_output)

        # Select best refinement
        selector = dspy.Predict(
            "original, refinements -&gt; best_refinement",
            instructions="Select the best refined version"
        )

        best = selector(
            original=output,
            refinements="\n\n".join(
                f"Version {i+1}: {r}"
                for i, r in enumerate(refinements)
            )
        )

        return best.best_refinement
</code></pre>
<h2 id="advanced-patterns"><a class="header" href="#advanced-patterns">Advanced Patterns</a></h2>
<h3 id="1-hierarchical-refinement"><a class="header" href="#1-hierarchical-refinement">1. Hierarchical Refinement</a></h3>
<p>Multi-level refinement for complex tasks:</p>
<pre><code class="language-python">class HierarchicalRefiner(dspy.Module):
    """Hierarchical refinement system."""

    def __init__(self):
        super().__init__()

        # Level-specific refiners
        self.structural_refiner = StructuralRefiner()
        self.content_refiner = ContentRefiner()
        self.style_refiner = StyleRefiner()

        # Quality thresholds for each level
        self.thresholds = {
            'structural': 0.7,
            'content': 0.8,
            'style': 0.9
        }

    def forward(self, input_data):
        """Apply hierarchical refinement."""
        # Start with initial generation
        output = self.generate_initial(input_data)

        # Level 1: Structural refinement
        structure_quality = self.evaluate_structure(output)
        if structure_quality &lt; self.thresholds['structural']:
            output = self.structural_refiner.refine(output)

        # Level 2: Content refinement
        content_quality = self.evaluate_content(output)
        if content_quality &lt; self.thresholds['content']:
            output = self.content_refiner.refine(output)

        # Level 3: Style refinement
        style_quality = self.evaluate_style(output)
        if style_quality &lt; self.thresholds['style']:
            output = self.style_refiner.refine(output)

        return output

class StructuralRefiner(dspy.Module):
    """Refines structural aspects."""

    def refine(self, output):
        """Improve organization and flow."""
        analyzer = dspy.ChainOfThought(
            "text -&gt; structure_analysis, improvement_plan"
        )

        analysis = analyzer(text=output)

        if "disorganized" in analysis.structure_analysis.lower():
            reorganizer = dspy.Predict(
                "text, plan -&gt; reorganized_text"
            )

            return reorganizer(
                text=output,
                plan=analysis.improvement_plan
            ).reorganized_text

        return output

class ContentRefiner(dspy.Module):
    """Refines content quality and completeness."""

    def refine(self, output):
        """Enhance content quality."""
        gap_analyzer = dspy.Predict(
            "text -&gt; missing_content, suggestions"
        )

        gaps = gap_analyzer(text=output)

        if gaps.missing_content:
            enhancer = dspy.Predict(
                "text, additions -&gt; enhanced_text"
            )

            return enhancer(
                text=output,
                additions=gaps.suggestions
            ).enhanced_text

        return output
</code></pre>
<h3 id="2-adaptive-refinement"><a class="header" href="#2-adaptive-refinement">2. Adaptive Refinement</a></h3>
<p>Dynamic strategy selection based on context:</p>
<pre><code class="language-python">class AdaptiveRefiner(dspy.Module):
    """Selects refinement strategies adaptively."""

    def __init__(self):
        super().__init__()
        self.strategies = {
            'simple': SimpleRefiner(),
            'complex': ComplexRefiner(),
            'creative': CreativeRefiner(),
            'technical': TechnicalRefiner()
        }
        self.strategy_selector = StrategySelector()

    def forward(self, output, context):
        """Adaptively select and apply refinement."""
        # Analyze context and output
        strategy_name = self.strategy_selector.select_strategy(
            output=output,
            context=context
        )

        # Apply selected strategy
        refiner = self.strategies[strategy_name]
        refined_output = refiner.refine(output)

        # Verify improvement
        improvement = self.calculate_improvement(output, refined_output)

        # If no improvement, try fallback strategy
        if improvement &lt; 0.1:
            fallback = self.strategies['simple']
            refined_output = fallback.refine(output)

        return refined_output

class StrategySelector:
    """Selects optimal refinement strategy."""

    def select_strategy(self, output, context):
        """Analyze and select strategy."""
        # Complexity analysis
        complexity = self.analyze_complexity(output)

        # Domain identification
        domain = self.identify_domain(context)

        # Issue classification
        issues = self.classify_issues(output)

        # Strategy selection logic
        if complexity &lt; 0.3:
            return 'simple'
        elif domain == 'creative':
            return 'creative'
        elif domain == 'technical':
            return 'technical'
        elif complexity &gt; 0.7:
            return 'complex'
        else:
            return 'simple'

    def analyze_complexity(self, output):
        """Analyze output complexity."""
        # Simple heuristic based on structure
        sections = output.split('\n\n')
        avg_section_length = sum(len(s) for s in sections) / len(sections)

        # Normalize to 0-1
        return min(avg_section_length / 1000, 1.0)

    def identify_domain(self, context):
        """Identify content domain."""
        domain_keywords = {
            'creative': ['story', 'poem', 'narrative', 'creative'],
            'technical': ['code', 'algorithm', 'technical', 'implementation'],
            'business': ['business', 'strategy', 'market', 'analysis']
        }

        context_lower = context.lower()

        for domain, keywords in domain_keywords.items():
            if any(kw in context_lower for kw in keywords):
                return domain

        return 'general'
</code></pre>
<h3 id="3-ensemble-refinement"><a class="header" href="#3-ensemble-refinement">3. Ensemble Refinement</a></h3>
<p>Combine multiple refinements for best results:</p>
<pre><code class="language-python">class EnsembleRefiner(dspy.Module):
    """Uses multiple refiners in ensemble."""

    def __init__(self):
        super().__init__()
        self.refiners = [
            ClarityRefiner(),
            DetailRefiner(),
            ConcisenessRefiner(),
            StructureRefiner()
        ]
        self.fusion = FusionModule()

    def forward(self, output, requirements):
        """Apply ensemble refinement."""
        refinements = []

        # Apply each refiner
        for refiner in self.refiners:
            refined = refiner.refine(output, requirements)
            refinements.append(refined)

        # Fuse best elements from all refinements
        final_output = self.fusion.fuse(
            original=output,
            refinements=refinements,
            requirements=requirements
        )

        return final_output

class FusionModule:
    """Fuses multiple refinements."""

    def fuse(self, original, refinements, requirements):
        """Intelligently combine refinements."""
        # Analyze each refinement
        analyses = []
        for i, refinement in enumerate(refinements):
            analysis = self.analyze_refinement(
                original=original,
                refined=refinement,
                requirements=requirements
            )
            analyses.append((i, analysis))

        # Select best aspects from each
        best_elements = self.select_best_elements(original, refinements, analyses)

        # Reconstruct fused output
        fused = self.reconstruct_output(best_elements)

        return fused

    def analyze_refinement(self, original, refined, requirements):
        """Analyze refinement quality."""
        scorer = dspy.ChainOfThought(
            "original, refined, requirements -&gt; improvements, issues, score"
        )

        result = scorer(
            original=original,
            refined=refined,
            requirements=requirements
        )

        return {
            'improvements': result.improvements,
            'issues': result.issues,
            'score': float(result.score)
        }

    def select_best_elements(self, original, refinements, analyses):
        """Select best elements from refinements."""
        # Implementation depends on content type
        # This is a simplified version

        best_elements = {
            'introduction': original.split('\n\n')[0],
            'body': [],
            'conclusion': original.split('\n\n')[-1]
        }

        # For each refinement, extract best sections
        for i, (refiner_idx, analysis) in enumerate(analyses):
            if analysis['score'] &gt; 0.7:
                # Add good sections from this refinement
                sections = refinements[refiner_idx].split('\n\n')
                best_elements['body'].extend(sections[1:-1])

        return best_elements
</code></pre>
<h2 id="specialized-refinement-systems"><a class="header" href="#specialized-refinement-systems">Specialized Refinement Systems</a></h2>
<h3 id="1-code-refinement-pipeline"><a class="header" href="#1-code-refinement-pipeline">1. Code Refinement Pipeline</a></h3>
<p>Automated code improvement system:</p>
<pre><code class="language-python">class CodeRefiner(dspy.Module):
    """Self-refining code generation system."""

    def __init__(self):
        super().__init__()
        self.generator = dspy.Predict("specification -&gt; code")
        self.analyzer = CodeAnalyzer()
        self.refiner = CodeImprover()

    def forward(self, specification):
        """Generate and refine code."""
        # Initial code generation
        code = self.generator(specification=specification).code

        # Refinement loop
        for iteration in range(3):
            # Analyze code quality
            analysis = self.analyzer.analyze(code)

            # Check if code meets standards
            if analysis.overall_score &gt;= 0.8:
                break

            # Improve code
            code = self.refiner.improve(
                code=code,
                issues=analysis.issues,
                suggestions=analysis.suggestions
            )

        return dspy.Prediction(
            final_code=code,
            analysis_history=analysis.history
        )

class CodeAnalyzer:
    """Analyzes code quality and identifies issues."""

    def analyze(self, code):
        """Comprehensive code analysis."""
        # Syntax check
        try:
            compile(code, '&lt;string&gt;', 'exec')
            syntax_score = 1.0
            syntax_issues = []
        except SyntaxError as e:
            syntax_score = 0.0
            syntax_issues = [str(e)]

        # Style check
        style_checker = dspy.Predict(
            "code -&gt; style_score, style_issues",
            instructions="Check Python style (PEP 8) conventions"
        )

        style_result = style_checker(code=code)
        style_score = float(style_result.style_score)

        # Logic analysis
        logic_checker = dspy.ChainOfThought(
            "code -&gt; logic_analysis, potential_bugs"
        )

        logic_result = logic_checker(code=code)

        # Overall assessment
        overall_score = (syntax_score + style_score) / 2

        return dspy.Prediction(
            overall_score=overall_score,
            syntax_issues=syntax_issues,
            style_issues=style_result.style_issues,
            logic_issues=logic_result.potential_bugs,
            suggestions=self.generate_suggestions(
                syntax_issues,
                style_result.style_issues,
                logic_result.potential_bugs
            )
        )

    def generate_suggestions(self, syntax_issues, style_issues, logic_issues):
        """Generate actionable improvement suggestions."""
        suggestions = []

        if syntax_issues:
            suggestions.append(f"Fix syntax errors: {', '.join(syntax_issues)}")

        if style_issues:
            suggestions.append(f"Improve style: {style_issues}")

        if logic_issues:
            suggestions.append(f"Review logic: {logic_issues}")

        return suggestions
</code></pre>
<h3 id="2-document-refinement-pipeline"><a class="header" href="#2-document-refinement-pipeline">2. Document Refinement Pipeline</a></h3>
<p>Multi-document improvement system:</p>
<pre><code class="language-python">class DocumentRefiner(dspy.Module):
    """Refines document content through multiple passes."""

    def __init__(self):
        super().__init__()
        self.passes = [
            StructurePass(),
            ContentPass(),
            StylePass(),
            ClarityPass()
        ]

    def forward(self, document):
        """Apply all refinement passes."""
        current_doc = document
        pass_results = []

        for pass_ in self.passes:
            result = pass_.refine(current_doc)
            current_doc = result.refined_document
            pass_results.append(result)

        return dspy.Prediction(
            final_document=current_doc,
            pass_history=pass_results
        )

class StructurePass:
    """Improves document structure."""

    def refine(self, document):
        """Analyze and improve structure."""
        analyzer = dspy.ChainOfThought(
            "document -&gt; structure_analysis, improvement_plan"
        )

        analysis = analyzer(document=document)

        if analysis.structure_analysis != "Well structured":
            restructurer = dspy.Predict(
                "document, plan -&gt; restructured_document"
            )

            result = restructurer(
                document=document,
                plan=analysis.improvement_plan
            )

            return dspy.Prediction(
                refined_document=result.restructured_document,
                changes_made="Restructured document"
            )

        return dspy.Prediction(
            refined_document=document,
            changes_made="No structural changes needed"
        )

class ContentPass:
    """Enhances document content."""

    def refine(self, document):
        """Improve content quality."""
        gap_finder = dspy.Predict(
            "document -&gt; missing_elements, content_gaps"
        )

        gaps = gap_finder(document=document)

        if gaps.content_gaps:
            enhancer = dspy.Predict(
                "document, gaps -&gt; enhanced_document"
            )

            result = enhancer(
                document=document,
                gaps=gaps.content_gaps
            )

            return dspy.Prediction(
                refined_document=result.enhanced_document,
                changes_made="Added missing content"
            )

        return dspy.Prediction(
            refined_document=document,
            changes_made="Content already complete"
        )
</code></pre>
<h2 id="monitoring-and-analytics"><a class="header" href="#monitoring-and-analytics">Monitoring and Analytics</a></h2>
<h3 id="1-refinement-metrics"><a class="header" href="#1-refinement-metrics">1. Refinement Metrics</a></h3>
<p>Track refinement effectiveness:</p>
<pre><code class="language-python">class RefinementMetrics:
    """Tracks and analyzes refinement metrics."""

    def __init__(self):
        self.metrics = {
            'iterations_per_refinement': [],
            'quality_improvements': [],
            'strategy_effectiveness': {},
            'time_spent': []
        }

    def record_refinement(self, initial_quality, final_quality,
                         iterations, strategy, time_spent):
        """Record refinement metrics."""
        improvement = final_quality - initial_quality

        self.metrics['iterations_per_refinement'].append(iterations)
        self.metrics['quality_improvements'].append(improvement)
        self.metrics['time_spent'].append(time_spent)

        if strategy not in self.metrics['strategy_effectiveness']:
            self.metrics['strategy_effectiveness'][strategy] = []

        self.metrics['strategy_effectiveness'][strategy].append(improvement)

    def analyze_performance(self):
        """Analyze overall refinement performance."""
        analysis = {}

        # Average iterations
        analysis['avg_iterations'] = sum(
            self.metrics['iterations_per_refinement']
        ) / len(self.metrics['iterations_per_refinement'])

        # Average improvement
        analysis['avg_improvement'] = sum(
            self.metrics['quality_improvements']
        ) / len(self.metrics['quality_improvements'])

        # Strategy comparison
        strategy_performance = {}
        for strategy, improvements in self.metrics['strategy_effectiveness'].items():
            strategy_performance[strategy] = sum(improvements) / len(improvements)

        analysis['strategy_ranking'] = sorted(
            strategy_performance.items(),
            key=lambda x: x[1],
            reverse=True
        )

        return analysis
</code></pre>
<h3 id="2-refinement-visualization"><a class="header" href="#2-refinement-visualization">2. Refinement Visualization</a></h3>
<p>Visualize refinement progress:</p>
<pre><code class="language-python">class RefinementVisualizer:
    """Visualizes refinement processes and outcomes."""

    def plot_refinement_progress(self, refinement_history):
        """Plot quality improvement over iterations."""
        import matplotlib.pyplot as plt

        iterations = range(len(refinement_history))
        qualities = [r['quality'] for r in refinement_history]

        plt.figure(figsize=(10, 6))
        plt.plot(iterations, qualities, 'bo-')
        plt.xlabel('Refinement Iteration')
        plt.ylabel('Quality Score')
        plt.title('Refinement Progress')
        plt.grid(True)

        # Mark threshold if available
        if hasattr(self, 'quality_threshold'):
            plt.axhline(
                y=self.quality_threshold,
                color='r',
                linestyle='--',
                label='Quality Threshold'
            )
            plt.legend()

        plt.show()

    def plot_strategy_comparison(self, strategy_metrics):
        """Compare different refinement strategies."""
        import matplotlib.pyplot as plt

        strategies = list(strategy_metrics.keys())
        avg_improvements = [
            sum(ims) / len(ims)
            for ims in strategy_metrics.values()
        ]

        plt.figure(figsize=(10, 6))
        plt.bar(strategies, avg_improvements)
        plt.xlabel('Refinement Strategy')
        plt.ylabel('Average Quality Improvement')
        plt.title('Strategy Effectiveness Comparison')
        plt.xticks(rotation=45)
        plt.tight_layout()
        plt.show()
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="1-design-principles"><a class="header" href="#1-design-principles">1. Design Principles</a></h3>
<pre><code class="language-python"># Good: Clear quality criteria
class WellDesignedRefiner(dspy.Module):
    def evaluate_quality(self, output):
        """Clear, measurable quality criteria."""
        criteria = {
            'completeness': self.check_completeness(output),
            'accuracy': self.check_accuracy(output),
            'clarity': self.check_clarity(output)
        }
        return criteria

# Bad: Vague quality assessment
class PoorRefiner(dspy.Module):
    def evaluate_quality(self, output):
        """Subjective and unclear criteria."""
        return "looks good"  # Not actionable
</code></pre>
<h3 id="2-termination-conditions"><a class="header" href="#2-termination-conditions">2. Termination Conditions</a></h3>
<pre><code class="language-python"># Good: Multiple termination criteria
class SmartRefiner(dspy.Module):
    def should_stop(self, iteration, quality, history):
        """Intelligent termination logic."""
        # Quality threshold met
        if quality &gt;= 0.9:
            return True, "Quality threshold met"

        # No improvement
        if len(history) &gt;= 2:
            if abs(history[-1]['quality'] - history[-2]['quality']) &lt; 0.01:
                return True, "No significant improvement"

        # Max iterations
        if iteration &gt;= self.max_iterations:
            return True, "Max iterations reached"

        return False, None

# Bad: Only iteration limit
class NaiveRefiner(dspy.Module):
    def should_stop(self, iteration, quality, history):
        """Only checks iteration count."""
        return iteration &gt;= 5  # May stop too early or too late
</code></pre>
<h3 id="3-feedback-utilization"><a class="header" href="#3-feedback-utilization">3. Feedback Utilization</a></h3>
<pre><code class="language-python"># Good: Specific, actionable feedback
class EffectiveRefiner(dspy.Module):
    def generate_feedback(self, output, issues):
        """Generate specific improvement feedback."""
        feedback = []

        if 'length' in issues:
            feedback.append(f"Current: {len(output)} chars. Target: 200-500 chars")

        if 'structure' in issues:
            feedback.append("Add clear introduction and conclusion")

        if 'details' in issues:
            feedback.append("Include specific examples and data")

        return "; ".join(feedback)
</code></pre>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Self-refining pipelines provide:</p>
<ul>
<li><strong>Automatic quality improvement</strong> through iterative refinement</li>
<li><strong>Adaptive strategies</strong> that respond to content and context</li>
<li><strong>Guaranteed output quality</strong> with configurable thresholds</li>
<li><strong>Comprehensive monitoring</strong> of refinement effectiveness</li>
<li><strong>Flexible architecture</strong> for diverse refinement needs</li>
</ul>
<h3 id="key-takeaways"><a class="header" href="#key-takeaways">Key Takeaways</a></h3>
<ol>
<li><strong>Iterate intelligently</strong> - Not all content needs equal refinement</li>
<li><strong>Measure everything</strong> - Track quality improvements and strategy effectiveness</li>
<li><strong>Adapt strategies</strong> - Match refinement approach to content type</li>
<li><strong>Set clear goals</strong> - Define measurable quality criteria</li>
<li><strong>Know when to stop</strong> - Avoid endless refinement loops</li>
</ol>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li><a href="../08-case-studies/06-assertion-driven-applications.html">Assertion-Driven Applications</a> - Real-world implementations</li>
<li><a href="../06-real-world-applications/">Production Deployment</a> - Deploy refining systems</li>
<li><a href="./07-self-refining-pipelines.html">Advanced Module Patterns</a> - Explore more patterns</li>
<li><a href="../../examples/chapter07/">Practical Examples</a> - See implementations in action</li>
</ul>
<h2 id="further-reading"><a class="header" href="#further-reading">Further Reading</a></h2>
<ul>
<li><a href="https://arxiv.org/abs/2005.02573">Iterative Refinement in NLP</a> - Research on refinement techniques</li>
<li><a href="https://en.wikipedia.org/wiki/Quality_assurance">Quality Assessment Methods</a> - General QA principles</li>
<li><a href="https://en.wikipedia.org/wiki/Adaptive_system">Adaptive Systems</a> - Theory of adaptive systems</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../07-advanced-topics/05-deployment-strategies.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../07-advanced-topics/08-declarative-compilation.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../07-advanced-topics/05-deployment-strategies.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../07-advanced-topics/08-declarative-compilation.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>






        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
