# Executable DSPy - Implementation Todo List

> **Objective:** Refactor `Ebook_DSPy` into a self-validating, interactive learning platform hosted on GitHub Pages.
> **Timeline:** 2 Weeks (Sprints)
> **Key Result:** A repo where `git push` triggers a test run of all code examples and auto-deploys a refreshed website.

---

## Phase 1: Cleanup & Standardization (Day 1-2)

**Goal:** Eliminate ambiguity in the repository structure by consolidating into a single "source of truth."

---

### Task 1.1: Consolidate Content ✅ COMPLETE

**Why:** The current dual-folder structure (`ebook/` vs `chapters/`) creates technical debt and confusion about which folder contains the authoritative content.

- [x] **1.1.1** Create the new content directory:
  ```bash
  mkdir -p content
  ```

- [x] **1.1.2** Identify all markdown files to migrate from `ebook/`:
  - The `ebook/` folder contains 10 chapter subdirectories with 117 markdown files
  - Chapters: 00-Frontmatter, 01-Fundamentals, 02-Signatures, 03-Modules, 04-Evaluation, 05-Optimizers, 06-Real-World Applications, 07-Advanced Topics, 08-Case Studies, 09-Appendices

- [x] **1.1.3** Copy all markdown files from `ebook/` to `content/` with new naming convention:
  - Use strict numerical prefixes for sorting: `01_`, `02_`, `03_`, etc.
  - Suggested naming structure:
    ```
    content/
    ├── 00_frontmatter/
    │   ├── 00_preface.md
    │   ├── 01_how_to_use_this_book.md
    │   ├── 02_prerequisites.md
    │   └── 03_setup_instructions.md
    ├── 01_fundamentals/
    │   ├── 00_chapter_intro.md
    │   ├── 01_what_is_dspy.md
    │   ├── 02_programming_vs_prompting.md
    │   ├── 03_installation_setup.md
    │   ├── 04_first_dspy_program.md
    │   ├── 05_language_models.md
    │   └── 06_exercises.md
    ├── 02_signatures/
    │   └── ... (repeat pattern)
    ├── 03_modules/
    ├── 04_evaluation/
    ├── 05_optimizers/
    ├── 06_real_world_applications/
    ├── 07_advanced_topics/
    ├── 08_case_studies/
    └── 09_appendices/
    ```

- [x] **1.1.4** Migrate image assets:
  - Create `content/images/` directory
  - Copy any images referenced in markdown files to this location
  - Migrated 3 images from `assets/images/`

- [x] **1.1.5** Verify all markdown files have been migrated:
  - Run a file count comparison between source and destination
  - **Result:** 117 files in both source and destination - 100% match ✅

- [x] **1.1.6** Delete the old directories after verification:
  - Remove `ebook/` directory
  - Remove `chapters/` directory (contains HTML duplicates)
  - **Completed:** Both directories successfully removed

---

### Task 1.2: Archive Administrative Files ✅ COMPLETE

**Why:** Non-content files like editorial reviews and UI/UX notes clutter the main repo and should be tracked via GitHub Issues or Projects instead.

- [x] **1.2.1** Create the planning directory:
  ```bash
  mkdir -p planning
  ```

- [x] **1.2.2** Move administrative files to `planning/`:
  - Move `uiux.md` → `planning/uiux.md`
  - Move `update_plan.md` → `planning/update_plan.md`
  - Move any `editorial-review-*.md` files found → `planning/`
  - **Result:** Successfully moved `uiux.md` and `update_plan.md` to planning directory. No editorial-review files found.

- [x] **1.2.3** Create GitHub Issues from planning documents (recommended for future):
  - Document a note in `planning/README.md` explaining these files should become GitHub Issues
  - **Completed:** Created `planning/README.md` with documentation about archived files

- [x] **1.2.4** Remove `index.html` from root (will be auto-generated by Jupyter Book):
  - Backup first: `cp index.html planning/legacy_index.html`
  - Delete: `rm index.html`
  - **Completed:** Backed up to `planning/legacy_index.html` and removed from root

---

### Task 1.3: Python Standard Layout ✅ COMPLETE

**Why:** Creating a proper Python project structure enables code reuse, testing, and maintainability.

- [x] **1.3.1** Review existing `src/` directory:
  - Currently contains: `SUMMARY.md` and `assets/` subdirectory
  - Determine what should stay vs. be reorganized
  - **Result:** Identified `SUMMARY.md` to move to planning and `assets/` to distribute to `content/`.

- [x] **1.3.2** Restructure `src/` for Python utilities:
  - Move `src/SUMMARY.md` → `planning/SUMMARY.md`
  - Move `src/assets/` → `content/images/` and `content/data/`
  - Create proper Python package structure:
    ```bash
    mkdir -p src/dspy_utils
    touch src/dspy_utils/__init__.py
    ```
  - **Completed:** Moved summary and assets. `src/` is now dedicated to python code.

- [x] **1.3.3** Create `src/dspy_utils/` with placeholder modules:
  - Create `src/dspy_utils/__init__.py`:
    ```python
    """Shared utilities for DSPy ebook examples."""
    ```
  - Create `src/dspy_utils/metrics.py`:
    ```python
    """Custom metrics used across multiple chapters."""
    
    def example_metric(prediction, ground_truth):
        """Placeholder metric function."""
        pass
    ```
  - Create `src/dspy_utils/datasets.py`:
    ```python
    """Dataset utilities for DSPy examples."""
    
    def load_example_dataset():
        """Placeholder dataset loader."""
        pass
    ```

- [x] **1.3.4** Create the `tests/` directory:
  ```bash
  mkdir -p tests
  touch tests/__init__.py
  ```

- [x] **1.3.5** Create a placeholder test file:
  - Create `tests/test_placeholder.py`:
    ```python
    """Placeholder test file for the DSPy ebook."""
    
    def test_placeholder():
        """Placeholder test to verify pytest works."""
        assert True
    ```

- [x] **1.3.6** Verify the test setup works:
  ```bash
  pip install pytest
  pytest tests/ -v
  ```
  - **Result:** Tests passed successfully (1 passed in 0.01s). Created venv for isolation.

---

## Phase 2: Infrastructure & Tooling (Day 3-5)

**Goal:** Implement the Jupyter Book build engine to replace manual HTML maintenance.

---

### Task 2.1: Install Jupyter Book ✅ COMPLETE

- [x] **2.1.1** Update `requirements.txt` to add Jupyter Book and dependencies:
  - Open `requirements.txt`
  - Add the following lines under a new section:
    ```
    # Jupyter Book for documentation
    jupyter-book>=0.15.0
    jupytext>=1.15.0
    sphinx>=5.0.0
    myst-nb>=0.17.0
    ```

- [x] **2.1.2** Install the dependencies:
  ```bash
  pip install -r requirements.txt
  ```

- [x] **2.1.3** Initialize Jupyter Book structure:
  ```bash
  jupyter-book create .
  ```
  - **Note:** This will create `_config.yml` and `_toc.yml` in the root directory
  - If files already exist, it may ask to overwrite - review before confirming

- [x] **2.1.4** Verify Jupyter Book was installed correctly:
  ```bash
  jupyter-book --version
  ```

---

### Task 2.2: Configure Table of Contents (`_toc.yml`) ✅ COMPLETE

- [x] **2.2.1** Open `_toc.yml` and configure for your content structure:
  - Delete the auto-generated example content
  - Create the following structure:
    ```yaml
    format: jb-book
    root: content/00_frontmatter/00_preface
    parts:
      - caption: Getting Started
        chapters:
          - file: content/00_frontmatter/01_how_to_use_this_book
          - file: content/00_frontmatter/02_prerequisites
          - file: content/00_frontmatter/03_setup_instructions
      
      - caption: Part 1 - Fundamentals
        chapters:
          - file: content/01_fundamentals/00_chapter_intro
            sections:
              - file: content/01_fundamentals/01_what_is_dspy
              - file: content/01_fundamentals/02_programming_vs_prompting
              - file: content/01_fundamentals/03_installation_setup
              - file: content/01_fundamentals/04_first_dspy_program
              - file: content/01_fundamentals/05_language_models
              - file: content/01_fundamentals/06_exercises
      
      - caption: Part 2 - Signatures
        chapters:
          - file: content/02_signatures/00_chapter_intro
            sections:
              - file: content/02_signatures/01_understanding_signatures
              - file: content/02_signatures/02_signature_syntax
              - file: content/02_signatures/03_typed_signatures
              - file: content/02_signatures/04_advanced_signatures
              - file: content/02_signatures/05_practical_examples
              - file: content/02_signatures/06_exercises
      
      # Continue pattern for remaining chapters...
      - caption: Part 3 - Modules
        chapters:
          - file: content/03_modules/00_chapter_intro
      
      - caption: Part 4 - Evaluation
        chapters:
          - file: content/04_evaluation/00_chapter_intro
      
      - caption: Part 5 - Optimizers
        chapters:
          - file: content/05_optimizers/00_chapter_intro
      
      - caption: Part 6 - Real-World Applications
        chapters:
          - file: content/06_real_world_applications/00_chapter_intro
      
      - caption: Part 7 - Advanced Topics
        chapters:
          - file: content/07_advanced_topics/00_chapter_intro
      
      - caption: Part 8 - Case Studies
        chapters:
          - file: content/08_case_studies/00_chapter_intro
      
      - caption: Appendices
        chapters:
          - file: content/09_appendices/00_appendix_intro
    ```

- [x] **2.2.2** Complete the `_toc.yml` with ALL section files:
  - Go through each chapter directory in `content/`
  - Add every `.md` file to the appropriate sections
  - Validate file paths match actual filenames

---

### Task 2.3: Configure Build (`_config.yml`) ✅ COMPLETE

- [x] **2.3.1** Open `_config.yml` and set basic metadata:
  ```yaml
  title: "DSPy: The Complete Guide"
  author: Dustin Ober
  copyright: "2024"
  logo: content/images/logo.png  # Add a logo image if available
  ```

- [x] **2.3.2** Configure the repository settings:
  ```yaml
  repository:
    url: https://github.com/dustinober/Ebook_DSPy
    path_to_book: ""
    branch: main
  ```

- [x] **2.3.3** Enable the Launch Button for Google Colab integration:
  ```yaml
  launch_buttons:
    notebook_interface: "classic"
    colab_url: "https://colab.research.google.com"
    binderhub_url: ""
    thebe: false
  ```

- [x] **2.3.4** Configure notebook execution settings:
  ```yaml
  execute:
    execute_notebooks: "off"  # Start with "off", change to "auto" after fixing code
    timeout: 300
    allow_errors: false
  ```
  - **Note:** Start with `"off"` to build docs without running code
  - Change to `"auto"` or `"cache"` once all code examples are verified

- [x] **2.3.5** Configure Sphinx extensions:
  ```yaml
  sphinx:
    extra_extensions:
      - sphinx_copybutton
    config:
      html_theme_options:
        use_download_button: true
        use_fullscreen_button: true
  ```

- [x] **2.3.6** Test the Jupyter Book build:
  ```bash
  jupyter-book build .
  ```
  - Fix any errors that appear
  - Check the output in `_build/html/`

- [x] **2.3.7** Preview the built site locally:
  ```bash
  cd _build/html && python -m http.server 8000
  ```
  - Open `http://localhost:8000` in your browser
  - Verify navigation and content display correctly

---

### Task 2.4: Setup GitHub Actions (CI/CD)

- [x] **2.4.1** Create the GitHub workflows directory:
  ```bash
  mkdir -p .github/workflows
  ```

- [x] **2.4.2** Create the deployment workflow file `.github/workflows/deploy.yml`:
  ```yaml
  name: Deploy Jupyter Book to GitHub Pages
  
  on:
    push:
      branches:
        - main
    workflow_dispatch:
  
  permissions:
    contents: read
    pages: write
    id-token: write
  
  concurrency:
    group: "pages"
    cancel-in-progress: false
  
  jobs:
    build:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout
          uses: actions/checkout@v4
        
        - name: Setup Python
          uses: actions/setup-python@v5
          with:
            python-version: '3.11'
            cache: 'pip'
        
        - name: Install dependencies
          run: |
            pip install -r requirements.txt
        
        - name: Build Jupyter Book
          run: |
            jupyter-book build .
        
        - name: Setup Pages
          uses: actions/configure-pages@v4
        
        - name: Upload artifact
          uses: actions/upload-pages-artifact@v3
          with:
            path: '_build/html'
    
    deploy:
      environment:
        name: github-pages
        url: ${{ steps.deployment.outputs.page_url }}
      runs-on: ubuntu-latest
      needs: build
      steps:
        - name: Deploy to GitHub Pages
          id: deployment
          uses: actions/deploy-pages@v4
  ```

- [x] **2.4.3** Enable GitHub Pages in repository settings:
  - Go to repository Settings → Pages
  - Set Source to "GitHub Actions"
  - Save the settings
  - **Note:** `gh` CLI confirmed deployment success, so this is likely configured.

- [x] **2.4.4** Test the workflow by pushing to main:
  ```bash
  git add .github/workflows/deploy.yml
  git commit -m "Add GitHub Pages deployment workflow"
  git push origin main
  ```

- [x] **2.4.5** Verify the deployment:
  - Go to the repository's Actions tab
  - Wait for the workflow to complete
  - Check the deployed site URL
  - **Result:** Workflow run 21151515861 completed successfully.

---

## Phase 3: Refactoring to "Literate Code" (Day 6-10)

**Goal:** Convert static Markdown into executable Jupyter Notebooks.

---

### Task 3.1: Conversion (Chapters 01-03) ✅ COMPLETE

**Why:** Moving from "describing code" to "providing code" makes the ebook interactive and testable.

- [x] **3.1.1** Install jupytext for format conversion:
  ```bash
  pip install jupytext
  ```

- [x] **3.1.2** Convert Chapter 01 - Fundamentals:
  - For each `.md` file in `content/01_fundamentals/`:
    - Open the markdown file
    - Identify all code blocks (marked with ` ```python `)
    - Create a new `.ipynb` notebook with the same name
    - Structure as follows:
      - Markdown cells for explanatory text
      - Code cells for Python examples
    - **Manual approach (recommended):**
      ```bash
      # For each file, create notebook manually:
      jupyter notebook  # Open Jupyter
      # Create new notebook, copy content manually
      ```
    - **Or use jupytext (automated):**
      ```bash
      jupytext --to notebook content/01_fundamentals/01_what_is_dspy.md
      ```

- [x] **3.1.3** Convert specific files in Chapter 01:
  - [x] Convert `content/01_fundamentals/00_chapter_intro.md` → `.ipynb`
  - [x] Convert `content/01_fundamentals/01_what_is_dspy.md` → `.ipynb`
  - [x] Convert `content/01_fundamentals/02_programming_vs_prompting.md` → `.ipynb`
  - [x] Convert `content/01_fundamentals/03_installation_setup.md` → `.ipynb`
  - [x] Convert `content/01_fundamentals/04_first_dspy_program.md` → `.ipynb`
  - [x] Convert `content/01_fundamentals/05_language_models.md` → `.ipynb`
  - [x] Convert `content/01_fundamentals/06_exercises.md` → `.ipynb`

- [x] **3.1.4** Convert Chapter 02 - Signatures:
  - [x] Convert `content/02_signatures/00_chapter_intro.md` → `.ipynb`
  - [x] Convert `content/02_signatures/01_understanding_signatures.md` → `.ipynb`
  - [x] Convert `content/02_signatures/02_signature_syntax.md` → `.ipynb`
  - [x] Convert `content/02_signatures/03_typed_signatures.md` → `.ipynb`
  - [x] Convert `content/02_signatures/04_advanced_signatures.md` → `.ipynb`
  - [x] Convert `content/02_signatures/05_practical_examples.md` → `.ipynb`
  - [x] Convert `content/02_signatures/06_exercises.md` → `.ipynb`

- [x] **3.1.5** Convert Chapter 03 - Modules:
  - [x] Convert `content/03_modules/00_chapter_intro.md` → `.ipynb`
  - [x] Convert `content/03_modules/01_module_basics.md` → `.ipynb`
  - [x] Convert `content/03_modules/02_predict_module.md` → `.ipynb`
  - [x] Convert `content/03_modules/02a_typed_predictor.md` → `.ipynb`
  - [x] Convert `content/03_modules/03_chainofthought.md` → `.ipynb`
  - [x] Convert `content/03_modules/04_react_agents.md` → `.ipynb`
  - [x] Convert `content/03_modules/05_custom_modules.md` → `.ipynb`
  - [x] Convert `content/03_modules/06_composing_modules.md` → `.ipynb`
  - [x] Convert `content/03_modules/07_exercises.md` → `.ipynb`
  - [x] Convert `content/03_modules/08_assertions.md` → `.ipynb`

- [x] **3.1.6** Update `_toc.yml` to reference `.ipynb` files instead of `.md`:
  - Change file extensions in the table of contents
  - Example: `file: content/01_fundamentals/01_what_is_dspy` (no extension needed - Jupyter Book auto-detects)

---

### Task 3.2: Dependency Pinning ✅ COMPLETE

**Why:** DSPy changes rapidly. Pinning versions ensures code examples work consistently.

- [x] **3.2.1** Update `requirements.txt` with pinned versions:
  - Open `requirements.txt`
  - Change DSPy from `dspy-ai>=2.5.0` to exact version:
    ```
    dspy-ai==2.5.43  # Pin to specific tested version
    ```

- [x] **3.2.2** Create a fresh virtual environment for testing:
  ```bash
  python -m venv venv
  source venv/bin/activate  # On macOS/Linux
  pip install -r requirements.txt
  ```

- [x] **3.2.3** Verify all imports work with the pinned version:
  - Create a test script `tests/test_imports.py`:
    ```python
    """Test that all DSPy imports work correctly."""
    
    def test_dspy_import():
        import dspy
        assert dspy is not None
    
    def test_dspy_predict():
        from dspy import Predict
        assert Predict is not None
    
    def test_dspy_chainofthought():
        from dspy import ChainOfThought
        assert ChainOfThought is not None
    
    def test_dspy_module():
        from dspy import Module
        assert Module is not None
    ```

- [x] **3.2.4** Run the import tests:
  ```bash
  pytest tests/test_imports.py -v
  ```

- [x] **3.2.5** Document the tested version in README.md:
  - Add a "Requirements" section noting the pinned DSPy version
  - Include any compatibility notes

---

### Task 3.3: Output Caching

**Why:** Pre-running notebooks ensures readers can see results immediately without needing API keys or running code.

- [ ] **3.3.1** Set up API keys for running notebooks locally:
  - Create a `.env` file (add to `.gitignore` if not already):
    ```bash
    echo "OPENAI_API_KEY=your_key_here" > .env
    echo ".env" >> .gitignore
    ```

- [ ] **3.3.2** Run each converted notebook to generate outputs:
  - Open each `.ipynb` file in Jupyter
  - Run all cells: Kernel → Restart & Run All
  - Fix any errors that occur
  - Save the notebook WITH outputs

- [ ] **3.3.3** Process Chapter 01 notebooks (run and save with outputs):
  - [ ] Run and save `content/01_fundamentals/00_chapter_intro.ipynb`
  - [ ] Run and save `content/01_fundamentals/01_what_is_dspy.ipynb`
  - [ ] Run and save `content/01_fundamentals/02_programming_vs_prompting.ipynb`
  - [ ] Run and save `content/01_fundamentals/03_installation_setup.ipynb`
  - [ ] Run and save `content/01_fundamentals/04_first_dspy_program.ipynb`
  - [ ] Run and save `content/01_fundamentals/05_language_models.ipynb`
  - [ ] Run and save `content/01_fundamentals/06_exercises.ipynb`

- [ ] **3.3.4** Process Chapter 02 notebooks (run and save with outputs):
  - [ ] Run and save all notebooks in `content/02_signatures/`

- [ ] **3.3.5** Process Chapter 03 notebooks (run and save with outputs):
  - [ ] Run and save all notebooks in `content/03_modules/`

- [ ] **3.3.6** Verify notebooks display correctly in the built book:
  ```bash
  jupyter-book build .
  cd _build/html && python -m http.server 8000
  ```
  - Check that outputs (graphs, logs, etc.) appear correctly

---

## Phase 4: Expansion & Quality (Day 11-14)

**Goal:** Fill the content gaps identified in the review.

---

### Task 4.1: Add "Local Development" Section

**Why:** Many users want to run DSPy without cloud API costs using local models.

- [ ] **4.1.1** Create the setup subdirectory:
  ```bash
  mkdir -p content/setup
  ```

- [ ] **4.1.2** Create `content/setup/local_models.md` with the following content structure:
  ```markdown
  # Running DSPy with Local Models
  
  ## Overview
  This guide covers running DSPy without cloud API costs using local LLMs.
  
  ## Using Ollama
  [Documentation for dspy.Ollama configuration]
  
  ## Using vLLM with Hugging Face Models
  [Documentation for dspy.HFClientVLLM configuration]
  
  ## Performance Considerations
  [Hardware requirements, optimization tips]
  ```

- [ ] **4.1.3** Write complete documentation for `dspy.Ollama`:
  - Installation steps for Ollama
  - How to pull models
  - DSPy configuration code example:
    ```python
    import dspy
    
    # Configure Ollama as the LM
    lm = dspy.OllamaLocal(model="llama2")
    dspy.configure(lm=lm)
    ```

- [ ] **4.1.4** Write complete documentation for `dspy.HFClientVLLM`:
  - vLLM installation steps
  - Model download and setup
  - DSPy configuration code example

- [ ] **4.1.5** Add the new section to `_toc.yml`:
  ```yaml
  - caption: Setup Guides
    chapters:
      - file: content/setup/local_models
  ```

- [ ] **4.1.6** Test all code examples in the local models guide

---

### Task 4.2: Add "Data Generation" Section

**Why:** Generating synthetic training data is a common DSPy use case that needs documentation.

- [ ] **4.2.1** Create `content/04_evaluation/10_data_generation.md` (or `.ipynb`):
  ```markdown
  # Synthetic Data Generation with DSPy
  
  ## Overview
  Using teacher models to generate training examples.
  
  ## Creating Example Objects
  [How to create dspy.Example objects]
  
  ## Teacher Model Strategy
  [Using a larger model to generate examples for smaller models]
  
  ## Quality Control
  [Validating generated examples]
  ```

- [ ] **4.2.2** Write code examples for creating `dspy.Example` objects:
  ```python
  import dspy
  
  # Create training examples
  example = dspy.Example(
      question="What is the capital of France?",
      answer="Paris"
  ).with_inputs("question")
  ```

- [ ] **4.2.3** Write code examples for teacher model generation:
  ```python
  # Using a larger model to generate examples
  teacher = dspy.OpenAI(model="gpt-4")
  
  # Generate synthetic examples
  # [Include full implementation]
  ```

- [ ] **4.2.4** Add the section to `_toc.yml`

- [ ] **4.2.5** Test all code examples in the data generation guide

---

### Task 4.3: Add Diagrams

**Why:** Visual diagrams improve comprehension of complex concepts like optimizers.

- [ ] **4.3.1** Identify chapters that would benefit from diagrams:
  - [ ] Chapter 03 - Modules (module composition diagram)
  - [ ] Chapter 04 - Evaluation (evaluation loop diagram)
  - [ ] Chapter 05 - Optimizers (optimizer comparison diagram)
  - [ ] Chapter 06 - Real-World Applications (architecture diagrams)

- [ ] **4.3.2** Create Mermaid diagram for Optimizers chapter:
  - Add to `content/05_optimizers/00_chapter_intro.md`:
    ````markdown
    ```mermaid
    graph LR
        A[Raw Prompt] --> B{DSPy Optimizer}
        B -->|BootstrapFewShot| C[Select Best Examples]
        B -->|MIPRO| D[Optimize Instructions]
        C --> E[Compiled Program]
        D --> E
    ```
    ````

- [ ] **4.3.3** Create Mermaid diagram for Module composition:
  ```markdown
  graph TD
      A[Input] --> B[Module 1]
      B --> C[Module 2]
      C --> D[Module 3]
      D --> E[Output]
  ```

- [ ] **4.3.4** Create Mermaid diagram for Evaluation loop:
  ```markdown
  graph LR
      A[Dataset] --> B[Run Program]
      B --> C[Compute Metrics]
      C --> D{Meets Threshold?}
      D -->|No| E[Optimize]
      E --> B
      D -->|Yes| F[Deploy]
  ```

- [ ] **4.3.5** Test that Mermaid diagrams render correctly:
  ```bash
  jupyter-book build .
  ```
  - Open the built HTML and verify diagrams display

- [ ] **4.3.6** Replace any static images with Mermaid equivalents where appropriate

---

## Phase 5: Maintenance Protocol (Ongoing)

**Goal:** Prevent "Bit Rot" and keep the repository healthy long-term.

---

### Task 5.1: The "Nightly Build" (Weekly Test Workflow)

**Why:** DSPy changes fast. Automated testing catches breakages from library updates.

- [ ] **5.1.1** Create `.github/workflows/test.yml`:
  ```yaml
  name: Weekly Notebook Tests
  
  on:
    schedule:
      - cron: '0 0 * * 0'  # Run every Sunday at midnight UTC
    workflow_dispatch:  # Allow manual triggering
  
  jobs:
    test:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout
          uses: actions/checkout@v4
        
        - name: Setup Python
          uses: actions/setup-python@v5
          with:
            python-version: '3.11'
            cache: 'pip'
        
        - name: Install dependencies
          run: |
            pip install -r requirements.txt
            pip install pytest nbval
        
        - name: Run notebook tests
          run: |
            pytest --nbval content/**/*.ipynb -v
          env:
            OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        
        - name: Run unit tests
          run: |
            pytest tests/ -v
  ```

- [ ] **5.1.2** Add the OPENAI_API_KEY secret to GitHub:
  - Go to repository Settings → Secrets and variables → Actions
  - Click "New repository secret"
  - Name: `OPENAI_API_KEY`
  - Value: Your OpenAI API key

- [ ] **5.1.3** Configure email notifications for failed builds:
  - Go to repository Settings → Notifications
  - Configure email alerts for workflow failures

- [ ] **5.1.4** Test the workflow manually:
  - Go to Actions → Weekly Notebook Tests
  - Click "Run workflow"
  - Verify it completes successfully

---

### Task 5.2: Community Guidelines

**Why:** Clear contribution guidelines make it easier for others to help maintain the project.

- [ ] **5.2.1** Create or update `CONTRIBUTING.md`:
  ```markdown
  # Contributing to DSPy Ebook
  
  Thank you for your interest in contributing!
  
  ## Prerequisites
  - Python 3.11+
  - Jupyter Notebook/Lab
  - An OpenAI API key (for testing)
  
  ## Development Setup
  1. Clone the repository
  2. Create a virtual environment: `python -m venv venv`
  3. Activate: `source venv/bin/activate`
  4. Install dependencies: `pip install -r requirements.txt`
  
  ## Making Changes
  
  ### Editing Notebooks
  1. Open the notebook in Jupyter
  2. Make your changes
  3. **IMPORTANT:** Clear all outputs before committing:
     - Kernel → Restart & Clear Output
     - Save the notebook
  4. Create a Pull Request
  
  ### Code Style
  - Follow PEP 8 for Python code
  - Use meaningful variable names
  - Add comments explaining complex logic
  
  ### Testing Your Changes
  ```bash
  # Build the book locally
  jupyter-book build .
  
  # Run tests
  pytest tests/ -v
  
  # Validate notebooks
  pytest --nbval content/**/*.ipynb -v
  ```
  
  ## Pull Request Process
  1. Create a feature branch
  2. Make your changes
  3. Clear notebook outputs
  4. Run tests locally
  5. Submit PR with description of changes
  ```

- [ ] **5.2.2** Update `.gitignore` to exclude notebook outputs (optional alternative):
  ```
  # Jupyter
  .ipynb_checkpoints/
  ```

- [ ] **5.2.3** Add pre-commit hooks for notebook hygiene (optional enhancement):
  ```bash
  pip install pre-commit nbstripout
  ```
  - Create `.pre-commit-config.yaml`:
    ```yaml
    repos:
      - repo: https://github.com/kynan/nbstripout
        rev: 0.6.1
        hooks:
          - id: nbstripout
    ```

- [ ] **5.2.4** Update `README.md` with comprehensive project information:
  - Add installation instructions
  - Add contribution link
  - Add link to live documentation site
  - Add badges for build status

---

## Final Verification Checklist

Before considering the project complete, verify the following:

- [ ] **Repository Structure:**
  - [ ] Only `content/` directory contains book chapters
  - [ ] `ebook/` and `chapters/` directories are deleted
  - [ ] `planning/` contains administrative files
  - [ ] `src/` contains Python utilities
  - [ ] `tests/` contains test files

- [ ] **Jupyter Book:**
  - [ ] `_config.yml` is properly configured
  - [ ] `_toc.yml` includes all chapters
  - [ ] `jupyter-book build .` completes without errors
  - [ ] Launch buttons work (Colab, Binder if configured)

- [ ] **GitHub Actions:**
  - [ ] `deploy.yml` workflow deploys to GitHub Pages
  - [ ] `test.yml` workflow runs weekly
  - [ ] GitHub Pages is enabled and accessible

- [ ] **Content:**
  - [ ] Chapters 01-03 are converted to notebooks
  - [ ] All notebooks have pre-executed outputs
  - [ ] Local development guide exists
  - [ ] Data generation guide exists
  - [ ] Mermaid diagrams render correctly

- [ ] **Documentation:**
  - [ ] `README.md` is updated
  - [ ] `CONTRIBUTING.md` exists and is complete
  - [ ] All planning files are in `planning/`

---

## Target Repository Structure

After completing all phases, your repository should look like this:

```
Ebook_DSPy/
├── .github/
│   └── workflows/
│       ├── deploy.yml          # Auto-publishes to GitHub Pages
│       └── test.yml            # Weekly notebook tests
├── content/                    # The actual book
│   ├── 00_frontmatter/
│   │   ├── 00_preface.md
│   │   └── ...
│   ├── 01_fundamentals/
│   │   ├── 00_chapter_intro.ipynb
│   │   ├── 01_what_is_dspy.ipynb
│   │   └── ...
│   ├── 02_signatures/
│   ├── 03_modules/
│   ├── 04_evaluation/
│   ├── 05_optimizers/
│   ├── 06_real_world_applications/
│   ├── 07_advanced_topics/
│   ├── 08_case_studies/
│   ├── 09_appendices/
│   ├── setup/
│   │   └── local_models.md
│   └── images/
├── planning/                   # Administrative files
│   ├── README.md
│   ├── uiux.md
│   └── update_plan.md
├── src/                        # Shared Python code
│   └── dspy_utils/
│       ├── __init__.py
│       ├── datasets.py
│       └── metrics.py
├── tests/                      # Test files
│   ├── __init__.py
│   ├── test_imports.py
│   └── test_placeholder.py
├── _config.yml                 # Jupyter Book config
├── _toc.yml                    # Table of Contents
├── .gitignore
├── CONTRIBUTING.md
├── LICENSE
├── README.md
└── requirements.txt
```
