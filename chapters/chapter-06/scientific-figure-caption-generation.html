<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific Figure Caption Generation | Chapter 6 | DSPy: The Comprehensive Guide</title>
    <meta name="description"
        content="Learn to generate accurate, stylistically consistent captions for scientific figures using a two-stage DSPy pipeline with context-aware generation and author style refinement.">
    <link rel="stylesheet" href="../../assets/css/style.css?v=2">
    <link rel="stylesheet" href="../../assets/css/chapter.css?v=8">
    <link rel="stylesheet" href="../../assets/css/content.css?v=2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>

<body class="chapter-page">
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <header>
        <div class="logo">
            <a href="../../index.html">
                <img src="../../src/assets/logos/logo.png" alt="DSPy Ebook Logo">
                <span>DSPy Ebook</span>
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="../../index.html">Home</a></li>
                <li><a href="../../index.html#chapters">Chapters</a></li>
                <li><a href="https://github.com/dustinober1/Ebook_DSPy" target="_blank">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <div class="chapter-layout">
                <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Chapter 6</h2>
                <span class="sidebar-subtitle">Real-World Applications</span>
            </div>
            <nav class="sidebar-nav">
                <ul class="section-list" id="section-list">
                    <li class="section-item" data-section="intro">
                        <a href="index.html">
                            <span class="section-number">1</span>
                            <span class="section-title">Chapter Overview</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="rag-systems">
                        <a href="rag-systems.html">
                            <span class="section-number">2</span>
                            <span class="section-title">RAG Systems</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="multi-hop-search">
                        <a href="multi-hop-search.html">
                            <span class="section-number">3</span>
                            <span class="section-title">Multi-Hop Search</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="classification-tasks">
                        <a href="classification-tasks.html">
                            <span class="section-number">4</span>
                            <span class="section-title">Classification Tasks</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="entity-extraction">
                        <a href="entity-extraction.html">
                            <span class="section-number">5</span>
                            <span class="section-title">Entity Extraction</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="intelligent-agents">
                        <a href="intelligent-agents.html">
                            <span class="section-number">6</span>
                            <span class="section-title">Intelligent Agents</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="code-generation">
                        <a href="code-generation.html">
                            <span class="section-number">7</span>
                            <span class="section-title">Code Generation</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="perspective-driven-research">
                        <a href="perspective-driven-research.html">
                            <span class="section-number">8</span>
                            <span class="section-title">Perspective-Driven Research</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="extreme-multilabel-classification">
                        <a href="extreme-multilabel-classification.html">
                            <span class="section-number">9</span>
                            <span class="section-title">Extreme Multilabel Classification</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="long-form-generation">
                        <a href="long-form-generation.html">
                            <span class="section-number">10</span>
                            <span class="section-title">Long-Form Generation</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="outline-generation">
                        <a href="outline-generation.html">
                            <span class="section-number">11</span>
                            <span class="section-title">Outline Generation</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="extreme-few-shot-learning">
                        <a href="extreme-few-shot-learning.html">
                            <span class="section-number">12</span>
                            <span class="section-title">Extreme Few-Shot Learning</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="ir-model-training-scratch">
                        <a href="ir-model-training-scratch.html">
                            <span class="section-number">13</span>
                            <span class="section-title">IR Model Training</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="lingvarbench-healthcare-synthetic-data">
                        <a href="lingvarbench-healthcare-synthetic-data.html">
                            <span class="section-number">14</span>
                            <span class="section-title">LingVarBench Healthcare</span>
                        </a>
                    </li>
                    <li class="section-item active" data-section="scientific-figure-caption-generation">
                        <a href="scientific-figure-caption-generation.html">
                            <span class="section-number">15</span>
                            <span class="section-title">Scientific Figure Captions</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="retrieval-augmented-guardrails">
                        <a href="retrieval-augmented-guardrails.html">
                            <span class="section-number">16</span>
                            <span class="section-title">Retrieval-Augmented Guardrails</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="graphrag-wikipedia-tidb-tutorial">
                        <a href="graphrag-wikipedia-tidb-tutorial.html">
                            <span class="section-number">17</span>
                            <span class="section-title">GraphRAG Tutorial</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="framework-comparisons-dspy-ecosystem">
                        <a href="framework-comparisons-dspy-ecosystem.html">
                            <span class="section-number">18</span>
                            <span class="section-title">Framework Comparisons</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="multi-agent-rag-systems">
                        <a href="multi-agent-rag-systems.html">
                            <span class="section-number">19</span>
                            <span class="section-title">Multi-Agent RAG Systems</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="exercises">
                        <a href="exercises.html">
                            <span class="section-number">20</span>
                            <span class="section-title">Exercises</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="solutions">
                        <a href="solutions.html">
                            <span class="section-number">21</span>
                            <span class="section-title">Solutions</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="../chapter-07/index.html" class="next-chapter-btn">
                    Next: Chapter 07 â†’
                </a>
            </div>
        </aside>

        <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle Sidebar">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <main class="chapter-content" id="main-content">
            <div class="reading-progress" id="reading-progress">
                <div class="progress-bar"></div>
            </div>

            <section class="chapter-hero">
                <div class="chapter-hero-content is-visible fade-in-up">
                    <span class="chapter-label">Chapter 6</span>
                    <h1 class="chapter-title">Scientific Figure Captioning</h1>
                    <p class="chapter-description">A two-stage pipeline for generating scientifically accurate and
                        stylistically consistent figure captions using context-aware optimization.</p>
                </div>
            </section>

            <div class="content-wrapper">
                <article class="content-article" id="content-article">
                    <section class="content-section is-visible" id="scientific-caption-generation"
                        data-section="scientific-figure-caption-generation">
                        <div class="markdown-content">

                            <!-- Overview -->
                            <div class="content-block">
                                <h2>The Challenge</h2>
                                <p>Writing captions for scientific figures is hard. The caption must be technically
                                    precise and match the specific writing style of the paper (or journal). Generic
                                    image captioning models fail here because they lack context and domain knowledge.
                                </p>
                            </div>

                            <!-- Architecture -->
                            <div class="content-block">
                                <h2>Two-Stage Pipeline</h2>
                                <p>We solve this with a dual-stage approach:</p>
                                <ol type="1">
                                    <li><strong>Context-Aware Generation:</strong> A module retrieves relevant text from
                                        the paper (e.g., surrounding the figure reference) to understand what the figure
                                        shows.</li>
                                    <li><strong>Stylistic Refinement:</strong> A second module rewrites basic captions
                                        to match the target author's style using few-shot examples from their previous
                                        work.</li>
                                </ol>

                                <h3>Stage 1: Category-Specific Optimization</h3>
                                <p>We use <strong>MIPROv2</strong> to optimize prompts specifically for different figure
                                    types (e.g., bar charts, scatter plots, diagrams).</p>
                                <div class="command-box">
                                    <pre><code class="language-python">def optimize_for_category(training_data, category):
    # Filter data for just this figure type (e.g. "bar_graph")
    category_data = [x for x in data if x.category == category]
    
    # Compile a specialized module
    optimizer = dspy.MIPROv2(metric=caption_quality_metric)
    return optimizer.compile(CategoryCaptionModule(), trainset=category_data)</code></pre>
                                </div>
                            </div>

                            <!-- Results -->
                            <div class="content-block">
                                <h2>Results</h2>
                                <p>This specialized pipeline achieved significant metric improvements:</p>
                                <ul>
                                    <li><strong>ROUGE-1 Recall:</strong> +8.3%</li>
                                    <li><strong>Style Consistency:</strong> ~45% improvement in BLEU scores against
                                        author profile examples.</li>
                                </ul>
                            </div>

                            <!-- Next Steps -->
                            <div class="content-block">
                                <div class="continue-btn-container">
                                    <a href="retrieval-augmented-guardrails.html" class="continue-btn">
                                        <span>Next: Retrieval-Augmented Guardrails</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M5 12h14M12 5l7 7-7 7" />
                                        </svg>
                                    </a>
                                </div>
                            </div>

                        </div>
                    </section>
                </article>
            </div>
        </main>
    </div>

    <footer>
        <p>&copy; 2025 DSPy Ebook. All rights reserved.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="../../assets/js/main.js?v=2"></script>
    <script src="../../assets/js/chapter_v2.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.initChapter) {
                window.initChapter({});
            }
            setTimeout(() => {
                if (window.Prism) window.Prism.highlightAll();
            }, 100);
        });
    </script>
</body>

</html>