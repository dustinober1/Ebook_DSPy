<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your First DSPy Program | Chapter 1 | DSPy: The Comprehensive Guide</title>
    <meta name="description"
        content="Write your first DSPy program - a step-by-step guide to building a simple question-answering application.">
    <link rel="stylesheet" href="../../assets/css/style.css?v=2">
    <link rel="stylesheet" href="../../assets/css/chapter.css?v=8">
    <link rel="stylesheet" href="../../assets/css/content.css?v=2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>

<body class="chapter-page">
    <header>
        <div class="logo">
            <a href="../../index.html">
                <img src="../../src/assets/logos/logo.png" alt="DSPy Ebook Logo">
                <span>DSPy Ebook</span>
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="../../index.html">Home</a></li>
                <li><a href="../../index.html#chapters">Chapters</a></li>
                <li><a href="https://github.com/dustinober1/Ebook_DSPy" target="_blank">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <div class="chapter-layout">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Chapter 1</h2>
                <span class="sidebar-subtitle">DSPy Fundamentals</span>
            </div>
            <nav class="sidebar-nav">
                <ul class="section-list" id="section-list">
                    <li class="section-item viewed" data-section="intro">
                        <a href="index.html">
                            <span class="section-number">1</span>
                            <span class="section-title">Chapter Overview</span>
                        </a>
                    </li>
                    <li class="section-item viewed" data-section="what-is-dspy">
                        <a href="what-is-dspy.html">
                            <span class="section-number">2</span>
                            <span class="section-title">What is DSPy?</span>
                        </a>
                    </li>
                    <li class="section-item viewed" data-section="programming-vs-prompting">
                        <a href="programming-vs-prompting.html">
                            <span class="section-number">3</span>
                            <span class="section-title">Programming vs. Prompting</span>
                        </a>
                    </li>
                    <li class="section-item active" data-section="first-program">
                        <a href="first-program.html">
                            <span class="section-number">4</span>
                            <span class="section-title">Your First DSPy Program</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="language-models">
                        <a href="language-models.html">
                            <span class="section-number">5</span>
                            <span class="section-title">Language Models</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="exercises">
                        <a href="exercises.html">
                            <span class="section-number">6</span>
                            <span class="section-title">Exercises</span>
                        </a>
                    </li>
                    <li class="section-item" data-section="solutions">
                        <a href="solutions.html">
                            <span class="section-number">7</span>
                            <span class="section-title">Solutions</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="../chapter-02/index.html" class="next-chapter-btn">
                    Next: Chapter 02 ‚Üí
                </a>
            </div>
        </aside>

        <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle Sidebar">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <main class="chapter-content">
            <div class="reading-progress" id="reading-progress">
                <div class="progress-bar"></div>
            </div>

            <section class="chapter-hero">
                <div class="chapter-hero-content is-visible fade-in-up">
                    <span class="chapter-label">Chapter 1 ¬∑ Section 4</span>
                    <h1 class="chapter-title">Your First DSPy Program</h1>
                    <p class="chapter-description">Let's write your first DSPy program! This hands-on section will walk
                        you through creating a simple question-answering application step by step.</p>
                    <div class="chapter-meta">
                        <span class="meta-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            ~15 min read
                        </span>
                    </div>
                </div>
            </section>

            <div class="content-wrapper">
                <article class="content-article" id="content-article">
                    <section class="content-section is-visible" id="first-program" data-section="first-program">
                        <div class="markdown-content" id="first-program-content">

                            <!-- What We'll Build -->
                            <div class="content-block">
                                <h2>üéØ What We'll Build</h2>

                                <p>We'll create a program that:</p>
                                <ul>
                                    <li>Takes a question as input</li>
                                    <li>Uses a language model to generate an answer</li>
                                    <li>Returns the answer</li>
                                </ul>
                                <p>This is the <strong>"Hello World"</strong> of DSPy!</p>
                            </div>

                            <!-- The Complete Program -->
                            <div class="content-block">
                                <h2>üìù The Complete Program</h2>

                                <p>Here's the full program. Don't worry if you don't understand everything yet‚Äîwe'll
                                    break it down step by step.</p>

                                <div class="file-label">hello_dspy.py</div>
                                <div class="command-box">
                                    <pre><code class="language-python">"""
Your First DSPy Program
A simple question-answering application
"""

import os
from dotenv import load_dotenv
import dspy

# Load environment variables
load_dotenv()

def main():
    # Step 1: Configure the language model
    lm = dspy.LM(
        model="openai/gpt-4o-mini",
        api_key=os.getenv("OPENAI_API_KEY")
    )
    dspy.configure(lm=lm)

    # Step 2: Define the task signature
    class QuestionAnswer(dspy.Signature):
        """Answer questions with factual information."""
        question: str = dspy.InputField()
        answer: str = dspy.OutputField()

    # Step 3: Create a predictor
    qa = dspy.Predict(QuestionAnswer)

    # Step 4: Use it!
    question = "What is the capital of France?"
    result = qa(question=question)

    # Step 5: Display the result
    print(f"Question: {question}")
    print(f"Answer: {result.answer}")

if __name__ == "__main__":
    main()</code></pre>
                                </div>
                            </div>

                            <!-- Step-by-Step Breakdown -->
                            <div class="content-block">
                                <h2>üîç Step-by-Step Breakdown</h2>

                                <div class="chapter-sections-list">
                                    <div class="chapter-section-item">
                                        <span class="section-icon">‚öôÔ∏è</span>
                                        <div class="section-content">
                                            <h4>Configure the Language Model</h4>
                                            <div class="command-box">
                                                <pre><code class="language-python">lm = dspy.LM(
    model="openai/gpt-4o-mini",
    api_key=os.getenv("OPENAI_API_KEY")
)
dspy.configure(lm=lm)</code></pre>
                                            </div>
                                            <p><strong>What's happening:</strong></p>
                                            <ul>
                                                <li><code>dspy.LM()</code> creates a language model instance</li>
                                                <li>We specify which model to use (<code>gpt-4o-mini</code>)</li>
                                                <li>We provide the API key from environment variables</li>
                                                <li><code>dspy.configure()</code> sets this as the default LM</li>
                                            </ul>
                                            <p><strong>Think of this as:</strong> Setting up your "engine" that powers
                                                all DSPy operations.</p>
                                        </div>
                                    </div>

                                    <div class="chapter-section-item">
                                        <span class="section-icon">üìã</span>
                                        <div class="section-content">
                                            <h4>Define the Task Signature</h4>
                                            <div class="command-box">
                                                <pre><code class="language-python">class QuestionAnswer(dspy.Signature):
    """Answer questions with factual information."""
    question: str = dspy.InputField()
    answer: str = dspy.OutputField()</code></pre>
                                            </div>
                                            <p><strong>What's happening:</strong></p>
                                            <ul>
                                                <li>We create a class that inherits from <code>dspy.Signature</code>
                                                </li>
                                                <li>The docstring describes what the task does</li>
                                                <li><code>question</code> is an input field (what we provide)</li>
                                                <li><code>answer</code> is an output field (what we want back)</li>
                                            </ul>
                                            <p><strong>Think of this as:</strong> A contract that says "Give me a
                                                question, I'll give you an answer."</p>
                                        </div>
                                    </div>

                                    <div class="chapter-section-item">
                                        <span class="section-icon">üî®</span>
                                        <div class="section-content">
                                            <h4>Create a Predictor</h4>
                                            <div class="command-box">
                                                <pre><code class="language-python">qa = dspy.Predict(QuestionAnswer)</code></pre>
                                            </div>
                                            <p><strong>What's happening:</strong></p>
                                            <ul>
                                                <li><code>dspy.Predict</code> is a module that makes predictions</li>
                                                <li>We pass our <code>QuestionAnswer</code> signature to it</li>
                                                <li>This creates a predictor that can answer questions</li>
                                            </ul>
                                            <p><strong>Think of this as:</strong> Creating a function that implements
                                                our contract.</p>
                                        </div>
                                    </div>

                                    <div class="chapter-section-item">
                                        <span class="section-icon">‚ñ∂Ô∏è</span>
                                        <div class="section-content">
                                            <h4>Use It!</h4>
                                            <div class="command-box">
                                                <pre><code class="language-python">question = "What is the capital of France?"
result = qa(question=question)</code></pre>
                                            </div>
                                            <p><strong>What's happening:</strong></p>
                                            <ul>
                                                <li>We call our predictor like a function</li>
                                                <li>We pass the question as a keyword argument</li>
                                                <li>DSPy automatically generates a prompt, calls the LM, and returns the
                                                    result</li>
                                            </ul>
                                            <p><strong>Think of this as:</strong> Just using the function we created!
                                            </p>
                                        </div>
                                    </div>

                                    <div class="chapter-section-item">
                                        <span class="section-icon">üì§</span>
                                        <div class="section-content">
                                            <h4>Display the Result</h4>
                                            <div class="command-box">
                                                <pre><code class="language-python">print(f"Answer: {result.answer}")</code></pre>
                                            </div>
                                            <p><strong>What's happening:</strong></p>
                                            <ul>
                                                <li><code>result</code> is a prediction object</li>
                                                <li>We access the <code>answer</code> field (from our signature)</li>
                                                <li>DSPy has extracted this from the LM's response</li>
                                            </ul>
                                            <p><strong>Think of this as:</strong> Getting the output from our function.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Running Your Program -->
                            <div class="content-block">
                                <h2>‚ñ∂Ô∏è Running Your Program</h2>

                                <div class="run-steps">
                                    <div class="run-step">
                                        <h4>1. Save the File</h4>
                                        <p>Save the code above as <code>hello_dspy.py</code>.</p>
                                    </div>

                                    <div class="run-step">
                                        <h4>2. Ensure Your Environment is Ready</h4>
                                        <div class="command-box">
                                            <pre><code class="language-bash"># Activate virtual environment
source venv/bin/activate

# Check .env file exists with API key
cat .env</code></pre>
                                        </div>
                                    </div>

                                    <div class="run-step">
                                        <h4>3. Run It!</h4>
                                        <div class="command-box">
                                            <pre><code class="language-bash">python hello_dspy.py</code></pre>
                                        </div>
                                    </div>

                                    <div class="run-step">
                                        <h4>4. Expected Output</h4>
                                        <div class="expected-output success">
                                            <pre class="output-block">Question: What is the capital of France?
Answer: Paris</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Behind the Scenes -->
                            <div class="content-block">
                                <h2>üîÆ What's Happening Behind the Scenes?</h2>

                                <p>When you run this program, DSPy:</p>

                                <div class="chapter-sections-list no-icons">
                                    <div class="chapter-section-item">
                                        <div class="section-content">
                                            <h4>Generates a prompt</h4>
                                            <p>based on your signature:</p>
                                            <div class="command-box">
                                                <pre><code class="language-text">Answer questions with factual information.

---

Question: What is the capital of France?
Answer:</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="chapter-section-item">
                                        <div class="section-content">
                                            <h4>Calls the language model</h4>
                                            <p>with this prompt</p>
                                        </div>
                                    </div>
                                    <div class="chapter-section-item">
                                        <div class="section-content">
                                            <h4>Parses the response</h4>
                                            <p>and extracts the answer</p>
                                        </div>
                                    </div>
                                    <div class="chapter-section-item">
                                        <div class="section-content">
                                            <h4>Returns a structured result</h4>
                                            <p>with the answer field populated</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="tip-box">
                                    <span class="tip-icon">üí°</span>
                                    <p>You didn't write the prompt‚ÄîDSPy did it for you!</p>
                                </div>
                            </div>

                            <!-- Experimenting -->
                            <div class="content-block">
                                <h2>üß™ Experimenting</h2>

                                <p>Try modifying the program to explore DSPy:</p>

                                <div class="experiment-cards">
                                    <div class="experiment-card">
                                        <h4>Experiment 1: Different Questions</h4>
                                        <div class="command-box">
                                            <pre><code class="language-python">questions = [
    "What is the capital of France?",
    "Who invented the telephone?",
    "What is 25 multiplied by 4?",
]

for question in questions:
    result = qa(question=question)
    print(f"Q: {question}")
    print(f"A: {result.answer}\n")</code></pre>
                                        </div>
                                    </div>

                                    <div class="experiment-card">
                                        <h4>Experiment 2: Add Field Descriptions</h4>
                                        <div class="command-box">
                                            <pre><code class="language-python">class QuestionAnswer(dspy.Signature):
    """Answer questions with factual information."""
    question: str = dspy.InputField()
    answer: str = dspy.OutputField(desc="concise answer in one sentence")</code></pre>
                                        </div>
                                        <p>The description helps guide the model's response format!</p>
                                    </div>

                                    <div class="experiment-card">
                                        <h4>Experiment 3: Multiple Output Fields</h4>
                                        <div class="command-box">
                                            <pre><code class="language-python">class DetailedQA(dspy.Signature):
    """Answer questions with details."""
    question: str = dspy.InputField()
    answer: str = dspy.OutputField()
    confidence: str = dspy.OutputField(desc="high, medium, or low")
    explanation: str = dspy.OutputField(desc="brief reasoning")</code></pre>
                                        </div>
                                    </div>

                                    <div class="experiment-card">
                                        <h4>Experiment 4: Use Chain of Thought</h4>
                                        <div class="command-box">
                                            <pre><code class="language-python"># Change one line!
qa = dspy.ChainOfThought(QuestionAnswer)

# Now it shows reasoning
result = qa(question="What is the capital of France?")
print(f"Reasoning: {result.rationale}")
print(f"Answer: {result.answer}")</code></pre>
                                        </div>
                                        <p>Just one line change adds step-by-step reasoning!</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Program Structure -->
                            <div class="content-block">
                                <h2>üìê Understanding the Code Structure</h2>

                                <p>Typical DSPy program structure:</p>

                                <div class="command-box">
                                    <pre><code class="language-python"># 1. Imports
import dspy
from dotenv import load_dotenv

# 2. Configuration
load_dotenv()
lm = dspy.LM(...)
dspy.configure(lm=lm)

# 3. Signature Definition
class MyTask(dspy.Signature):
    input_field: str = dspy.InputField()
    output_field: str = dspy.OutputField()

# 4. Module Creation
module = dspy.Predict(MyTask)

# 5. Usage
result = module(input_field="...")
print(result.output_field)</code></pre>
                                </div>

                                <p>This pattern will be consistent across all DSPy programs!</p>
                            </div>

                            <!-- Summary -->
                            <div class="content-block summary-block">
                                <h2>üìù Summary</h2>

                                <p><strong>You've learned:</strong></p>
                                <ul>
                                    <li>‚úÖ How to configure DSPy with a language model</li>
                                    <li>‚úÖ How to define a signature (task specification)</li>
                                    <li>‚úÖ How to create a predictor with <code>dspy.Predict</code></li>
                                    <li>‚úÖ How to use the predictor to generate results</li>
                                    <li>‚úÖ The basic structure of DSPy programs</li>
                                </ul>

                                <p><strong>Key concepts:</strong></p>
                                <ul>
                                    <li><strong>Signatures</strong> define inputs and outputs</li>
                                    <li><strong>Modules</strong> (like <code>Predict</code>) implement the behavior</li>
                                    <li><strong>Configuration</strong> sets up the language model</li>
                                    <li><strong>Results</strong> are structured objects with named fields</li>
                                </ul>
                            </div>

                            <!-- Continue -->
                            <div class="content-block">
                                <div class="continue-btn-container">
                                    <a href="language-models.html" class="continue-btn">
                                        <span>Continue to Language Models</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M5 12h14M12 5l7 7-7 7" />
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </section>
                </article>
            </div>
        </main>
    </div>

    <footer>
        <p>&copy; 2025 DSPy Ebook. All rights reserved.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="../../assets/js/main.js?v=1"></script>
    <script src="../../assets/js/chapter_v2.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.initChapter) {
                window.initChapter({});
            }
            setTimeout(() => {
                if (window.Prism) window.Prism.highlightAll();
            }, 100);
        });
    </script>
</body>

</html>