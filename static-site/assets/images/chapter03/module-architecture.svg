<svg viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="500" y="35" font-size="22" font-weight="bold" text-anchor="middle" fill="#333">
    DSPy Module Architecture
  </text>

  <!-- dspy.Module base class -->
  <g>
    <rect x="300" y="80" width="400" height="100" fill="#e8f4f8" stroke="#0288d1" stroke-width="2" rx="5"/>
    <text x="500" y="110" font-size="14" font-weight="bold" text-anchor="middle" fill="#0288d1">
      dspy.Module (Base Class)
    </text>
    <text x="500" y="135" font-size="11" text-anchor="middle" fill="#333">
      Defines: __init__(), forward()
    </text>
    <text x="500" y="160" font-size="11" text-anchor="middle" fill="#333">
      Enables composition and optimization
    </text>
  </g>

  <!-- Dashed line down -->
  <line x1="500" y1="180" x2="500" y2="220" stroke="#ccc" stroke-width="2" stroke-dasharray="5,5"/>

  <!-- Built-in Modules Row 1 -->
  <g>
    <!-- Predict -->
    <rect x="50" y="230" width="150" height="100" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" rx="5"/>
    <text x="125" y="260" font-size="12" font-weight="bold" text-anchor="middle" fill="#f57f17">
      dspy.Predict
    </text>
    <text x="125" y="280" font-size="10" text-anchor="middle" fill="#333">
      Simple prediction
    </text>
    <text x="125" y="300" font-size="9" text-anchor="middle" fill="#666" font-style="italic">
      Direct Q&amp;A
    </text>

    <!-- ChainOfThought -->
    <rect x="250" y="230" width="150" height="100" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" rx="5"/>
    <text x="325" y="260" font-size="12" font-weight="bold" text-anchor="middle" fill="#f57f17">
      dspy.ChainOfThought
    </text>
    <text x="325" y="280" font-size="10" text-anchor="middle" fill="#333">
      Reasoning steps
    </text>
    <text x="325" y="300" font-size="9" text-anchor="middle" fill="#666" font-style="italic">
      Explain reasoning
    </text>

    <!-- ReAct -->
    <rect x="450" y="230" width="150" height="100" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" rx="5"/>
    <text x="525" y="260" font-size="12" font-weight="bold" text-anchor="middle" fill="#f57f17">
      dspy.ReAct
    </text>
    <text x="525" y="280" font-size="10" text-anchor="middle" fill="#333">
      Reasoning + Tools
    </text>
    <text x="525" y="300" font-size="9" text-anchor="middle" fill="#666" font-style="italic">
      Agentic behavior
    </text>

    <!-- Custom Module -->
    <rect x="650" y="230" width="150" height="100" fill="#fff9c4" stroke="#fbc02d" stroke-width="2" rx="5"/>
    <text x="725" y="260" font-size="12" font-weight="bold" text-anchor="middle" fill="#f57f17">
      Custom Module
    </text>
    <text x="725" y="280" font-size="10" text-anchor="middle" fill="#333">
      Your own logic
    </text>
    <text x="725" y="300" font-size="9" text-anchor="middle" fill="#666" font-style="italic">
      Full control
    </text>

    <!-- Arrows down -->
    <line x1="125" y1="330" x2="125" y2="360" stroke="#999" stroke-width="1.5"/>
    <line x1="325" y1="330" x2="325" y2="360" stroke="#999" stroke-width="1.5"/>
    <line x1="525" y1="330" x2="525" y2="360" stroke="#999" stroke-width="1.5"/>
    <line x1="725" y1="330" x2="725" y2="360" stroke="#999" stroke-width="1.5"/>
  </g>

  <!-- Composition Section -->
  <g>
    <text x="500" y="390" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">
      Composition: Build Pipelines
    </text>

    <!-- Simple pipeline -->
    <rect x="100" y="420" width="180" height="60" fill="#f0f0f0" stroke="#999" stroke-width="1" rx="3"/>
    <text x="190" y="443" font-size="11" font-family="monospace" text-anchor="middle" fill="#333">
      Sequential Processing
    </text>
    <text x="190" y="463" font-size="9" text-anchor="middle" fill="#666">
      Step1 → Step2 → Result
    </text>

    <!-- Branching pipeline -->
    <rect x="360" y="420" width="180" height="60" fill="#f0f0f0" stroke="#999" stroke-width="1" rx="3"/>
    <text x="450" y="443" font-size="11" font-family="monospace" text-anchor="middle" fill="#333">
      Multi-Branch Processing
    </text>
    <text x="450" y="463" font-size="9" text-anchor="middle" fill="#666">
      Parallel paths merged
    </text>

    <!-- Adaptive pipeline -->
    <rect x="620" y="420" width="180" height="60" fill="#f0f0f0" stroke="#999" stroke-width="1" rx="3"/>
    <text x="710" y="443" font-size="11" font-family="monospace" text-anchor="middle" fill="#333">
      Adaptive Processing
    </text>
    <text x="710" y="463" font-size="9" text-anchor="middle" fill="#666">
      Dynamic routing
    </text>
  </g>

  <!-- Optimization -->
  <g>
    <text x="500" y="530" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">
      Optimization: Improve Performance
    </text>

    <!-- Training -->
    <rect x="100" y="560" width="170" height="80" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="185" y="585" font-size="11" font-weight="bold" text-anchor="middle" fill="#388e3c">
      1. Define Metric
    </text>
    <text x="185" y="607" font-size="9" text-anchor="middle" fill="#333">
      measure correctness
    </text>
    <text x="185" y="625" font-size="9" text-anchor="middle" fill="#333">
      on test set
    </text>

    <!-- Optimization -->
    <rect x="340" y="560" width="170" height="80" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="425" y="585" font-size="11" font-weight="bold" text-anchor="middle" fill="#388e3c">
      2. Choose Optimizer
    </text>
    <text x="425" y="607" font-size="9" text-anchor="middle" fill="#333">
      Bootstrap, MIPRO,
    </text>
    <text x="425" y="625" font-size="9" text-anchor="middle" fill="#333">
      KNNFewShot, etc.
    </text>

    <!-- Evaluation -->
    <rect x="580" y="560" width="170" height="80" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="665" y="585" font-size="11" font-weight="bold" text-anchor="middle" fill="#388e3c">
      3. Evaluate &amp; Improve
    </text>
    <text x="665" y="607" font-size="9" text-anchor="middle" fill="#333">
      Automatically optimize
    </text>
    <text x="665" y="625" font-size="9" text-anchor="middle" fill="#333">
      prompts &amp; examples
    </text>

    <!-- Deployment -->
    <rect x="820" y="560" width="130" height="80" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="885" y="585" font-size="11" font-weight="bold" text-anchor="middle" fill="#388e3c">
      4. Deploy
    </text>
    <text x="885" y="607" font-size="9" text-anchor="middle" fill="#333">
      Use optimized
    </text>
    <text x="885" y="625" font-size="9" text-anchor="middle" fill="#333">
      program
    </text>
  </g>

  <!-- Bottom workflow -->
  <g>
    <line x1="270" y1="645" x2="295" y2="645" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="510" y1="645" x2="535" y2="645" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="750" y1="645" x2="775" y2="645" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#388e3c"/>
    </marker>
  </defs>
</svg>
